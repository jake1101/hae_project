(function(){function n(b){var h=b.jsustoolkitErrCode=b.jsustoolkitErrCode||{};(b.hmac=b.hmac||{}).create=function(){var a=null,f=null,d=null,g={start:function(k,c){if(null!==k)if(k.constructor==String)if(k=k.toLowerCase(),k in b.md.algorithms)a=b.md.algorithms[k].create();else throw{code:"103006",message:h["103006"]};else a=k;if(null!==c){if(c.constructor==String)c=b.util.createBuffer(c);else if(c.constructor==Array){var l=c;c=b.util.createBuffer();for(var e=0;e<l.length;++e)c.putByte(l[e])}var g=c.length();g>a.blockLength&&(a.start(),a.update(c.bytes()),c=a.digest());f=b.util.createBuffer();d=b.util.createBuffer();g=c.length();for(e=0;e<g;++e)l=c.at(e),f.putByte(54^l),d.putByte(92^l);if(g<a.blockLength)for(l=a.blockLength-g,e=0;e<l;++e)f.putByte(54),d.putByte(92);f=f.bytes();d=d.bytes()}a.start();a.update(f)},update:function(b){if(null==b)throw{code:"103004",message:h["103004"]};if("undefined"==typeof a)throw{code:"103005",message:h["103005"]};a.update(b)},getMac:function(){var b=a.digest().bytes();a.start();a.update(d);a.update(b);return a.digest()}};g.digest=g.getMac;return g}}var p=["./md","./util"],m=null;"function"!==typeof define&&("object"===typeof module&&module.exports?m=function(b,h){h(require,module)}:(crosscert=window.crosscert=window.crosscert||{},n(crosscert)));(m||"function"===typeof define)&&(m||define)(["require","module"].concat(p),function(b,h){h.exports=function(a){var f=p.map(function(a){return b(a)}).concat(n);a=a||{};a.defined=a.defined||{};if(a.defined.hmac)return a.hmac;a.defined.hmac=!0;for(var d=0;d<f.length;++d)f[d](a);return a.hmac}})})();