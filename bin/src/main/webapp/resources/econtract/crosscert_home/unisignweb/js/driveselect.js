var __driveselect=function(a){var s=function(g){function m(a){if(!a)return alert("UI load error."),!1;var b=document.createElement("div");document.body.insertBefore(b,document.body.firstChild);b.innerHTML=a;return!0}var l=function(){var d;d=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");d.open("GET",a.ESVS.SRCPath+"unisignweb/rsrc/layout/driveselect.html?version="+a.ver,!1);d.send(null);return d.responseText},h=function(){var d;d=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");d.open("GET",a.ESVS.SRCPath+"unisignweb/rsrc/lang/"+a.ESVS.Language+"/driveselect_"+a.ESVS.Language+".js?version="+a.ver,!1);d.send(null);return d.responseText},f=a.ESVS.TabIndex;return function(){var d=eval(l),b=eval(eval(h)()),n=g.type,c=g.args.list,p=g.args.list.length;m(d());var e=document.getElementById("us-drive-select-lbl-title"),k=document.getElementById("us-drive-select-disk-img"),q=document.getElementById("us-drive-select-disk-name"),r=document.getElementById("us-drive-select-disk-lbl"),d=document.getElementById("us-drive-select-disk-select");document.getElementById("us-drive-select-cls-btn-img").setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/x-btn.png",0);if("DEVICE_REMOVABLE_DISK"===n){if(e.appendChild(document.createTextNode(b.IDS_DRIVE_SELECTION)),e.setAttribute("tabindex",f,0),k.setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/media_removable.png",0),q.appendChild(document.createTextNode(b.IDS_DRIVE_REMOVABLE)),r.appendChild(document.createTextNode(b.IDS_DRIVE_SELECTION_CHOOSE_DISK)),d.setAttribute("tabindex",f+1,0),0<p)for(e=0;e<p;e++)k=document.createElement("option"),k.setAttribute("value",c[e].index,0),k.appendChild(document.createTextNode(c[e].name)),d.appendChild(k)}else if("DEVICE_SAVE_TOKEN"===n&&(e.appendChild(document.createTextNode(b.IDS_SAVE_TOKEN_SELECTION)),e.setAttribute("tabindex",f,0),k.setAttribute("src",a.ESVS.SRCPath+"unisignweb/rsrc/img/media_savetoken.png",0),q.appendChild(document.createTextNode(b.IDS_SAVE_TOKEN)),r.appendChild(document.createTextNode(b.IDS_SAVE_TOKEN_CHOOSE_SAVE_TOKEN)),d.setAttribute("tabindex",f+1,0),0<p))for(e=0;e<p;e++)k=document.createElement("option"),k.setAttribute("value",c[e].index,0),k.appendChild(document.createTextNode(c[e].name)),d.appendChild(k);c=document.getElementById("us-drive-select-confirm-btn");c.setAttribute("value",b.IDS_CONFIRM,0);c.setAttribute("title",b.IDS_CONFIRM+b.IDS_BUTTON,0);c.setAttribute("tabindex",f+2,0);c.onclick=function(){var a=document.getElementById("us-drive-select-disk-select"),a=parseInt(a.selectedIndex)+1;g.onConfirm(a)};c=document.getElementById("us-drive-select-cancel-btn");c.setAttribute("value",b.IDS_CANCEL,0);c.setAttribute("title",b.IDS_CANCEL+b.IDS_BUTTON,0);c.setAttribute("tabindex",f+3,0);c.onclick=function(){g.onCancel()};c=document.getElementById("us-drive-select-cls-img-btn");"DEVICE_REMOVABLE_DISK"===n?c.setAttribute("title",b.IDS_DRIVE_SELECTION_CLOSE,0):"DEVICE_SAVE_TOKEN"===n&&c.setAttribute("title",b.IDS_SAVE_TOKEN_CLOSE,0);c.setAttribute("tabindex",f+4,0);c.onclick=function(){g.onCancel()};return document.getElementById("us-div-drive-select")}()};return function(g){var m=a.uiLayerLevel,l=a.uiUtil().getOverlay(m),h=s({type:g.type,args:g.args,onConfirm:g.onConfirm,onCancel:g.onCancel});h.style.zIndex=m+1;a.ESVS.TargetObj.insertBefore(l,a.ESVS.TargetObj.firstChild);var f=window.onresize;return{show:function(){draggable(h,document.getElementById("us-div-drive-select-title"));l.style.display="block";a.uiUtil().offsetResize(h);window.onresize=function(){a.uiUtil().offsetResize(h);f&&f()};a.uiLayerLevel+=10;a.ESVS.TabIndex+=30;setTimeout(function(){var a=h.getElementsByTagName("p");if(0<a.length)for(var b=0;b<a.length;b++)"us-drive-select-lbl-title"==a[b].id&&a[b].focus()},10)},hide:function(){l.style.display="none";h.style.display="none"},dispose:function(){window.onresize=function(){f&&f()};h.parentNode.parentNode.removeChild(h.parentNode);l.parentNode.removeChild(l);a.uiLayerLevel-=10;a.ESVS.TabIndex-=30}}}};