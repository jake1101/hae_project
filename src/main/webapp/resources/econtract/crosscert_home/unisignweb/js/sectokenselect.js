var __sectokenselect=function(c){var r=function(d){function n(a){if(!a)return alert("UI load error."),!1;var b=document.createElement("div");document.body.insertBefore(b,document.body.firstChild);b.innerHTML=a;return!0}function h(a){l.restoreOnMouseEvent();if(null==d.args||null==d.args.list)return c.uiUtil().msgBox(a.IDS_MSGBOX_ERROR_NO_SELECTED_DRIVER),!1;var b=d.args.list,e=d.args.list.length;if(0>=e)return c.uiUtil().msgBox(a.IDS_MSGBOX_ERROR_NO_SELECTED_DRIVER),!1;for(var f=!1,k=parseInt(l.selectedIndex()),g=0;g<e;g++)if(b[g].index===k){f="invalid"==b[g].validity?!1:!0;break}if(!1==f&&!1==confirm(a.IDS_MSGBOX_CONFIRM_TRUSTLESS_DRIVER))return!1;d.onConfirm(k,b[g].name);return!0}function e(a){var b;if(null==d.args||null==d.args.list||0>=d.args.list.length)b=null;else{b=null;b=d.args.list;for(var e=d.args.list.length,h=[],k=0;k<e;k++){var g=[];g[0]=b[k].name;g[1]=b[k].driver;g[2]=b[k].validity;g[3]=b[k].index;h[k]=g}b={list:h}}p=c.loadUI("gridlist");l=p({type:"driverslist",tblid:"us-sectoken-select-tbl-list",tbltitleid:"us-sectoken-select-tbl-list-th",titlelistid:"us-sectoken-select-grid-head-div",titlerowid:"us-sectoken-select-list-title-row",titleelementid:"us-sectoken-select-list-title-element",titledividerid:"us-sectoken-select-list-title-divider",titlelistcn:"us-layout-sectoken-select-grid-head-div",titlerowcn:"us-layout-sectoken-select-grid-head-row",titleelementcn:"us-layout-sectoken-select-grid-row-title-element",titledividercn:"us-layout-sectoken-select-grid-row-title-divider",tblbodyid:"us-sectoken-select-tbl-list-td",datalistid:"us-sectoken-select-grid-body-div",datarowid:"us-sectoken-select-list-body-row",dataelementid:"us-sectoken-select-list-data-element",datalistcn:"us-layout-sectoken-select-grid-body-div",datarowcn:"us-layout-sectoken-select-grid-body-row",dataelementcn:"us-layout-sectoken-select-grid-row-data-element",dataselectcn:"us-layout-sectoken-select-grid-row-data-selected-element"});e=!0;"opera"==c.browserName&&(e=!1);b?l.drawList(a,a.length,b.list,b.list.length,f+2,e):l.drawList(a,a.length,null,0,f+2,e)}var m=function(){var a;a=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");a.open("GET",c.ESVS.SRCPath+"unisignweb/rsrc/layout/sectokenselect.html?version="+c.ver,!1);a.send(null);return a.responseText},q=function(){var a;a=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");a.open("GET",c.ESVS.SRCPath+"unisignweb/rsrc/lang/"+c.ESVS.Language+"/sectokenselect_"+c.ESVS.Language+".js?version="+c.ver,!1);a.send(null);return a.responseText},p=null,l=null,f=c.ESVS.TabIndex;return function(){var a=eval(m),b=eval(eval(q)());n(a());a=document.getElementById("us-sectoken-select-lbl-title");a.appendChild(document.createTextNode(b.IDS_SECTOKEN_SELECTION));a.setAttribute("tabindex",f,0);a=document.getElementById("us-sectoken-select-lbl-notice");a.innerHTML=b.IDS_SECTOKEN_NOTICE;a.setAttribute("tabindex",f+1,0);a=document.getElementById("us-sectoken-select-lbl-notice-txt");a.innerHTML=b.IDS_SECTOEKN_SUGGESTION;a.setAttribute("tabindex",f+3,0);a=document.getElementById("us-sectoken-select-install-driver-btn");a.setAttribute("value",b.IDS_SECTOKEN_DRIVER_INSTALL,0);a.setAttribute("title",b.IDS_SECTOKEN_DRIVER_INSTALL+b.IDS_BUTTON,0);a.setAttribute("tabindex",f+4,0);a.onclick=function(){"firefox"==c.browserName?window.open("http://rootca.or.kr/kor/hsm/hsm.jsp","hsm_url","scrollbars=1"):window.open("http://rootca.or.kr/kor/hsm/hsm.jsp");this.focus()};a=document.getElementById("us-sectoken-select-confirm-btn");a.setAttribute("value",b.IDS_CONFIRM,0);a.setAttribute("title",b.IDS_CONFIRM+b.IDS_BUTTON,0);a.setAttribute("tabindex",f+5,0);a.onclick=function(){h(b)};a=document.getElementById("us-sectoken-select-cancel-btn");a.setAttribute("value",b.IDS_CANCEL,0);a.setAttribute("title",b.IDS_CANCEL+b.IDS_BUTTON,0);a.setAttribute("tabindex",f+6,0);a.onclick=function(){l.restoreOnMouseEvent();d.onCancel()};a=document.getElementById("us-sectoken-select-cls-img-btn");a.setAttribute("title",b.IDS_SECTOKEN_SELECTION_CLOSE,0);a.setAttribute("tabindex",f+7,0);a.onclick=function(){l.restoreOnMouseEvent();d.onCancel()};document.getElementById("us-sectoken-select-cls-btn-img").setAttribute("src",c.ESVS.SRCPath+"unisignweb/rsrc/img/x-btn.png",0);e([{title:b.IDS_SECTOKEN_PRODUCT_NAME},{title:b.IDS_SECTOKEN_DRIVER_NAME},{title:b.IDS_SECTOKEN_EXAMINATION_PASSAGE}]);return document.getElementById("us-div-sectoken-select")}()};return function(d){var n=c.uiLayerLevel,h=c.uiUtil().getOverlay(n),e=r({type:d.type,args:d.args,onConfirm:d.onConfirm,onCancel:d.onCancel});e.style.zIndex=n+1;document.body.insertBefore(h,document.body.firstChild);var m=window.onresize;return{show:function(){c.ActiveUI=this;draggable(e,document.getElementById("us-div-sectoken-select-title"));h.style.display="block";c.uiUtil().offsetResize(e);window.onresize=function(){c.uiUtil().offsetResize(e);m&&m()};c.uiLayerLevel+=10;c.ESVS.TabIndex+=30;setTimeout(function(){var c=e.getElementsByTagName("p");if(0<c.length)for(var d=0;d<c.length;d++)"us-sectoken-select-lbl-title"==c[d].id&&c[d].focus()},10)},hide:function(){h.style.display="none";e.style.display="none"},dispose:function(){window.onresize=function(){m&&m()};e.parentNode.parentNode.removeChild(e.parentNode);h.parentNode.removeChild(h);c.uiLayerLevel-=10;c.ESVS.TabIndex-=30}}}};